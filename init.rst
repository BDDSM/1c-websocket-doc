.. _sphinx-chapter:
   
.. meta::
    :description: WebSocket клиент и сервер для 1С. Внешний компонент (Документация)
    :keywords: 1С, WebSocket, rpc

.. meta::
    :http-equiv=Content-Type: text/html; charset=utf-8

===================================================
Подключение компонента
===================================================

&НаСервере
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. index:: ПодключитьВнешнююКомпоненту
.. function:: ПодключитьВнешнююКомпоненту()

    Синоним: **AttachAddIn()**

    Подключает компонент, выполненный по технологии Native API. 
    Компонент может храниться в информационной базе или макете конфигурации в виде двоичных данных или в ZIP-архиве.
    Для режимов запуска "Тонкий клиент" и "Веб-клиент", компонент должен быть предварительно установлен методом ``УстановитьВнешнююКомпоненту()``. 

Пример использования:

.. code-block:: bsl
   :linenos:

    ПутьКомпоненты = "ОбщийМакет.МакетКомпоненты";
		
    Если НЕ ПодключитьВнешнююКомпоненту(ПутьКомпоненты,"WebSocket", ТипВнешнейКомпоненты.Native) Тогда
        ВызватьИсключение "Ошибка подключения внешнего компонента";
    КонецЕсли;

        
&НаКлиенте
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. index:: УстановитьВнешнююКомпоненту
.. function:: УстановитьВнешнююКомпоненту()

    Синоним: **InstallAddIn()**
    
    Доставляет объект внешнего компонента с сервера на клиент, после чего он становится доступен для метода ``ПодключитьВнешнююКомпоненту()``.

    Примечание:

    Метод работает только с компонентами, хранящимися в архиве.

    Если для конфигурации свойство РежимИспользованияМодальности установлено в НеИспользовать, следует использовать метод ``НачатьУстановкуВнешнейКомпоненты()``. 

Пример использования:

.. code-block:: bsl
   :linenos:

    ПутьКомпоненты = "ОбщийМакет.МакетКомпоненты";
	
    УстановитьВнешнююКомпоненту(ПутьКомпоненты);

    Если НЕ ПодключитьВнешнююКомпоненту(ПутьКомпоненты,"WebSocket", ТипВнешнейКомпоненты.Native) Тогда
        ВызватьИсключение "Ошибка подключения внешнего компонента";
    КонецЕсли;


MANIFEST.XML
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.. index:: MANIFEST
.. only:: html

    Файл предназначен для описания zip-архива файлов внешних компонент для использования на разных платформах

Пример файла:

.. code-block:: xml
   :linenos:

    <?xml version="1.0" encoding="UTF-8"?>
    <bundle xmlns="http://v8.1c.ru/8.2/addin/bundle" name="websocket">
        <component os="Windows" path="1c-websocket_Win_32.dll" type="native" arch="i386"/>
        <component os="Windows" path="1c-websocket_Win_64.dll" type="native" arch="x86_64"/>
    </bundle>