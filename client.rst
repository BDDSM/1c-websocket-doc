.. _sphinx-chapter:
   
.. meta::
    :description: WebSocket Клиент для 1С. Внешний компонент (Документация). Использование клиента websocket для 1С: Предприятие
    :keywords: websocket, client

.. meta::
    :http-equiv=Content-Type: text/html; charset=utf-8

=======================================
Клиент websocket
=======================================

Инициализация
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. index:: Новый
.. function:: Новый("AddIn.WebSocket.Client");

    Синоним: New()

    Инициализация внешнего компонента (Клмент). Полученный таким образом объект используется для дальнейшего взаимодействия.
    

Пример использования:

.. code-block:: bsl
   :linenos:

    Клиент = Новый("AddIn.WebSocket.Client");

Получение сообщений
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. index:: Получить
.. function:: Получить(Таймаут, Данные)
    
    Синоним: Receive()
    Возвращает: Булево - Признак принятия сообщения. Истина, если сообщение принято 
    
    Таймаут - Число - Количество миллисекунд, на которое заблокировать вызов и ожидать сообщения. Если 0 - ждать бесконечно.

    Данные - Строка - Полученные данные

    Получает принятое сообщение в фоновом режиме, если сообщений нет ждет Таймаут миллисекунд, или ждет до появления сообщения, если Таймаут=0
    
Пример использования:

.. code-block:: bsl
   :linenos:
	
    Таймаут = 0;
    Данные = "";

    // Постоянный цикл принятие сообщений
    Пока Клиент.Принять(Таймаут, Данные) Цикл
		
        Сообщить("Принят пакет данных:");
        Сообщить(Данные);

    КонецЦикла;
    
    Таймаут = 3000;

    // Ждем 3 секунды, если не принято сообщений исполнение кода продолжается
    Пока Клиент.Принять(Таймаут, Данные) Цикл
		
        Сообщить("Принят пакет данных:");
        Сообщить(Данные);

    КонецЦикла;

    Сообщить("Закончен прием сообщений");